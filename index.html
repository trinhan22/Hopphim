<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HopPhim - Phim Hay Trong Tầm Tay</title>
    <meta property="og:title" content="HopPhim - Phim Hay Trong Tầm Tay" />
    <meta property="og:description" content="Trang xem phim trực tuyến miễn phí chất lượng cao với giao diện hiện đại, tốc độ tải phim nhanh và kho phim khổng lồ." />
    <meta property="og:image" content="https://hopphim.netlify.app/panel.webp" />
    <meta property="og:url" content="https://hopphim.netlify.app" />
    <meta property="og:type" content="article" />

    <link rel="icon" type="image/webp" href="LOGO.webp" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            /* --- COLOR PALETTE MỚI --- */
            --bg-body: #191b24;       /* Nền Body */
            --bg-dark: #0f111a;       /* Nền Header/Footer */
            --text-main: #ffffff;
            --text-sub: #a0a0a0;
            
            /* Gradient Text theo yêu cầu */
            --gradient-main: linear-gradient(90deg, #FF8F50, #FF5E62);
            --primary-color: #FF5E62; /* Màu đơn sắc dự phòng */
            
            --font-main: 'Inter', sans-serif;
            --card-radius: 8px;
            --transition: all 0.3s ease-in-out;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }
        
        body { 
            font-family: var(--font-main); 
            background-color: var(--bg-body); 
            color: var(--text-main); 
            overflow-x: hidden;
        }

        /* Utility Class cho chữ Gradient */
        .text-gradient {
            background: var(--gradient-main);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: inline-block;
        }

        /* --- HEADER --- */
        header {
            position: fixed; top: 0; width: 100%; height: 70px;
            padding: 0 4%;
            display: flex; justify-content: space-between; align-items: center;
            z-index: 1000;
            background: transparent;
            transition: var(--transition);
        }
        /* Khi scroll thì hiện nền #0f111a */
        header.scrolled {
            background: var(--bg-dark);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
        }

/* --- CẬP NHẬT LOGO & CHỮ GRADIENT --- */
        .logo {
            display: flex;             /* Xếp ảnh và chữ nằm ngang */
            align-items: center;       /* Căn giữa theo chiều dọc */
            gap: 12px;                 /* Khoảng cách giữa ảnh và chữ */
            cursor: pointer;
        }

        .logo img { 
            height: 42px;              /* Giảm xíu cho cân đối với chữ */
            object-fit: contain; 
        }

        /* Style cho chữ HOPPHIM */
        .logo-text {
            font-size: 1.5rem;         /* Kích thước chữ */
            font-weight: 900;          /* Chữ đậm */
            letter-spacing: 1px;       /* Khoảng cách các ký tự */
            text-transform: uppercase; /* Viết hoa */
            
            /* Hiệu ứng Gradient Cam-Hồng */
            background: var(--gradient-main);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            
            white-space: nowrap;       /* Đảm bảo chữ luôn trên 1 dòng */
        }

        /* Responsive cho mobile: Giảm size chữ logo xíu nếu cần */
        @media (max-width: 768px) {
            .logo img { height: 35px; }
            .logo-text { font-size: 1.2rem; }
        }

        .nav-links { display: flex; gap: 30px; list-style: none; }
        .nav-links li a { 
            color: #ccc; text-decoration: none; font-size: 14px; font-weight: 600; 
            text-transform: uppercase; transition: 0.3s; position: relative;
        }
        .nav-links li a:hover { color: #fff; }
        /* Gạch chân gradient khi hover menu */
        .nav-links li a::after {
            content: ''; position: absolute; bottom: -5px; left: 0; width: 0%; height: 2px;
            background: var(--gradient-main); transition: 0.3s;
        }
        .nav-links li a:hover::after { width: 100%; }

        .search-box { 
            display: flex; align-items: center; 
            background: #23252f; 
            padding: 8px 16px; border-radius: 50px; 
            border: 1px solid rgba(255,255,255,0.05);
        }
        .search-box input { 
            background: transparent; border: none; color: #fff; 
            margin-left: 10px; font-family: var(--font-main); font-size: 14px; width: 150px;
        }

        /* --- HERO --- */
/* --- HERO (ĐÃ FIX LỖI ÁM ĐEN TEXT) --- */
        .hero {
            height: 75vh; 
            display: flex; align-items: center; justify-content: center;
            position: relative; 
            margin-bottom: 20px;
            
            /* Lớp phủ đen mờ 50% (rgba 0,0,0,0.5) đè lên ảnh để làm nổi chữ */
            /* Nhớ thay đường dẫn ảnh của ông vào đây */
            background-image: url('home-background.jpg');
            
            background-size: cover; 
            background-position: center center;
            background-repeat: no-repeat;
        }

        /* Lớp Gradient đen ở chân (giữ nguyên để hòa vào nội dung dưới) */
        .hero::after {
            content: ''; 
            position: absolute; 
            bottom: 0; left: 0; 
            width: 100%; 
            height: 200px; /* Chiều cao vùng chuyển màu */
            background: linear-gradient(to bottom, transparent 0%, #191b24 100%);
            z-index: 1; 
            pointer-events: none;
        }

        .hero-content { 
            z-index: 10; 
            text-align: center; max-width: 900px; padding: 20px; 
            animation: fadeUp 1s ease-out;
        }

        .hero-title { 
            font-size: 4rem; font-weight: 900; margin-bottom: 15px; letter-spacing: -2px;
            
            /* Gradient Text Sạch (Không bóng) */
            background: var(--gradient-main); 
            -webkit-background-clip: text; 
            background-clip: text;
            -webkit-text-fill-color: transparent;
            
            /* QUAN TRỌNG: Đã xóa toàn bộ text-shadow và filter drop-shadow */
            /* Giúp màu cam-hồng giữ nguyên độ tươi, không bị ám đen */
        }

        .hero-desc { 
            font-size: 1.2rem; color: #e2e8f0; font-weight: 500; 
            max-width: 700px; margin: 0 auto;
            /* Vẫn giữ bóng nhẹ cho text mô tả màu trắng này thì ok */
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
        }

        @keyframes fadeUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        /* --- CATEGORY SECTION --- */
        main { position: relative; z-index: 20; padding-bottom: 50px; }
        .category-section { padding: 0 4% 50px; }
        
        .category-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-left: 4px solid var(--primary-color); padding-left: 15px; }
        /* Tiêu đề danh mục gradient */
        .category-title { font-size: 1.6rem; font-weight: 800; text-transform: uppercase; letter-spacing: -0.5px; }
        
        .see-all-link { 
            color: var(--text-sub); font-size: 0.9rem; cursor: pointer; font-weight: 600; 
            display: flex; align-items: center; gap: 5px; transition: 0.3s;
        }
        .see-all-link:hover { color: var(--primary-color); }

        .slider-container { position: relative; }
        .movie-row { 
            display: flex; gap: 15px; overflow-x: auto; scroll-behavior: smooth; 
            padding-bottom: 10px; scrollbar-width: none;
        }
        .movie-row::-webkit-scrollbar { display: none; }
        
        .slider-arrow {
            position: absolute; top: 50%; transform: translateY(-50%); z-index: 50;
            width: 45px; height: 45px; border-radius: 50%;
            background: rgba(15,17,26, 0.8); color: #fff; border: 1px solid rgba(255,255,255,0.1);
            cursor: pointer; opacity: 0; transition: 0.3s;
            display: flex; align-items: center; justify-content: center;
        }
        .slider-container:hover .slider-arrow { opacity: 1; }
        .slider-arrow:hover { background: var(--primary-color); border-color: var(--primary-color); }
        .arrow-left { left: -20px; }
        .arrow-right { right: -20px; }

        /* --- CARD STYLE: SLIDE UP (TRỒI LÊN) --- */
        .movie-card {
            flex: 0 0 200px; height: 300px; 
            position: relative; 
            border-radius: var(--card-radius);
            overflow: hidden; /* Quan trọng để che phần thừa */
            cursor: pointer; 
            background: #23252f;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            transition: transform 0.3s ease;
        }

        .movie-poster { 
            width: 100%; height: 100%; object-fit: cover; 
            transition: transform 0.5s ease;
        }

        /* Lớp phủ đen để chữ dễ đọc */
        .card-overlay-gradient {
            position: absolute; inset: 0;
            background: linear-gradient(to top, rgba(0,0,0,1) 0%, rgba(0,0,0,0.2) 60%, transparent 100%);
            opacity: 0.9; z-index: 2; pointer-events: none;
        }

        /* Container thông tin: Mặc định nằm thấp xuống */
        .movie-info-slideup {
            position: absolute; 
            bottom: 0; left: 0; width: 100%;
            padding: 15px;
            z-index: 5;
            transform: translateY(65px); /* Đẩy xuống để ẩn nút, chỉ hiện tên */
            transition: transform 0.4s cubic-bezier(0.19, 1, 0.22, 1); /* Easing mượt */
        }

        /* --- HIỆU ỨNG HOVER --- */
        .movie-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(255, 94, 98, 0.15); }
        .movie-card:hover .movie-poster { transform: scale(1.1); filter: brightness(0.6); }
        
        /* Khi hover, thông tin trồi lên (về vị trí 0) */
        .movie-card:hover .movie-info-slideup { transform: translateY(0); }

        /* Nội dung bên trong Card */
        .movie-name { 
            font-size: 1rem; font-weight: 700; color: #fff; 
            margin-bottom: 5px; line-height: 1.3;
            display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
        }
        
        .movie-meta {
            font-size: 0.75rem; color: #cbd5e1; 
            display: flex; gap: 8px; align-items: center; margin-bottom: 15px;
            font-weight: 500;
        }
        .quality-badge { 
            background: var(--gradient-main); color: #fff; 
            padding: 1px 6px; border-radius: 4px; font-size: 0.65rem; font-weight: 700;
        }

        /* Nút hành động trong Card */
        .card-actions {
            display: flex; gap: 10px;
            opacity: 0; transition: opacity 0.3s ease 0.1s; /* Hiện chậm 1 xíu */
        }
        .movie-card:hover .card-actions { opacity: 1; }

        .btn-action {
            flex: 1; padding: 8px; border: none; border-radius: 6px;
            font-size: 0.8rem; font-weight: 600; cursor: pointer;
            display: flex; align-items: center; justify-content: center; gap: 5px;
        }
        .btn-play { background: #fff; color: #000; }
        .btn-play:hover { background: var(--gradient-main); color: #fff; }
        .btn-list { background: rgba(255,255,255,0.1); color: #fff; backdrop-filter: blur(4px); }
        .btn-list:hover { background: rgba(255,255,255,0.3); }

        /* --- FOOTER (FULL INFO) --- */
        footer { 
            background: var(--bg-dark); 
            padding: 60px 4% 20px; 
            margin-top: 80px; 
            border-top: 1px solid #23252f;
            font-size: 0.9rem;
        }
        .footer-grid {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 40px;
            margin-bottom: 40px;
        }
        .footer-col h3 { 
            font-size: 1.1rem; color: #fff; margin-bottom: 20px; font-weight: 700;
        }
        /* Tô màu gradient cho tiêu đề footer */
        .footer-title-gradient {
            background: var(--gradient-main); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        .footer-col ul { list-style: none; }
        .footer-col ul li { margin-bottom: 12px; }
        .footer-col ul li a { color: var(--text-sub); text-decoration: none; transition: 0.3s; }
        .footer-col ul li a:hover { color: var(--primary-color); padding-left: 5px; }

        .footer-bottom {
            border-top: 1px solid #23252f; padding-top: 20px;
            display: flex; justify-content: space-between; align-items: center;
            color: #64748b; font-size: 0.8rem;
        }
        .social-icons a { 
            color: #fff; background: #23252f; 
            width: 35px; height: 35px; border-radius: 50%; 
            display: inline-flex; align-items: center; justify-content: center;
            margin-left: 10px; transition: 0.3s;
        }
        .social-icons a:hover { background: var(--gradient-main); transform: translateY(-3px); }

        /* --- RESPONSIVE --- */
        @media (max-width: 768px) {
            .hero-title { font-size: 2.5rem; }
            .nav-links { display: none; }
            .footer-grid { grid-template-columns: 1fr 1fr; gap: 20px; }
            .movie-info-slideup { transform: translateY(0); } /* Mobile hiện luôn nút */
            .card-actions { opacity: 1; }
        }

        /* Modal & Loading */
        .modal { display: none; position: fixed; inset: 0; z-index: 2000; background: rgba(15, 17, 26, 0.95); padding: 40px; overflow-y: auto; }
        .modal.active { display: block; }
        .modal-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; }
        .modal-grid .movie-card { width: 100%; height: 280px; }
        .loading { text-align: center; padding: 50px; color: var(--primary-color); }

        /* --- LOADING XỊN (GRADIENT SPINNER) --- */
        .loading-container {
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            height: 300px; /* Chiều cao vùng loading */
            width: 100%;
        }

        .loader-spinner {
            width: 50px; 
            height: 50px;
            border-radius: 50%;
            border: 3px solid transparent;
            /* Tạo viền gradient xoay */
            border-top-color: #FF5E62; 
            border-right-color: #FF8F50;
            
            /* Hiệu ứng xoay và phát sáng (Glow) */
            animation: spin 0.8s linear infinite;
            box-shadow: 0 0 15px rgba(255, 94, 98, 0.5); 
            margin-bottom: 15px;
        }

        .loading-text-pro {
            font-size: 0.9rem;
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
            /* Chữ Gradient đập đập (Pulse) */
            background: var(--gradient-main);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: pulseText 1.5s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes pulseText {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(0.98); }
        }

        /* --- FOOTER LOGO STYLE --- */
        .footer-brand {
            display: flex;
            align-items: center;
            gap: 12px; /* Khoảng cách giữa ảnh và chữ */
            margin-bottom: 10px;
        }

        .footer-brand img {
            height: 50px; /* Logo footer để to hơn header một chút nhìn cho vững */
            object-fit: contain;
        }

        /* Responsive: Mobile thì logo nhỏ lại xíu */
        @media (max-width: 768px) {
            .footer-brand img { height: 40px; }
        }
    </style>
</head>
<body>

    <header id="header">
        <div class="logo" onclick="loadHome()">
            <img src="LOGO.WEBP" alt="HopPhim">
            <span class="logo-text">HOPPHIM</span>
        </div>
        <ul class="nav-links">
            <li><a href="#" onclick="loadHome()">Trang chủ</a></li>
            <li><a href="#" onclick="loadCategory('phim-bo', 'Phim Bộ')">Phim Bộ</a></li>
            <li><a href="#" onclick="loadCategory('phim-le', 'Phim Lẻ')">Phim Lẻ</a></li>
            <li><a href="#" onclick="loadCountry('han-quoc', 'Hàn Quốc')">Hàn Quốc</a></li>
            <li><a href="#" onclick="loadCountry('trung-quoc', 'Trung Quốc')">Trung Quốc</a></li>
        </ul>
        <div class="search-box">
            <i class="fas fa-search" style="color: #a0a0a0"></i>
            <input type="text" id="searchInput" placeholder="Tìm phim...">
        </div>
    </header>

    <section id="hero" class="hero">
        <div class="hero-content">
            <h1 class="hero-title">HopPhim - Phim Hay<br>Trong Tầm Tay</h1>
            <p class="hero-desc">Kho phim miễn phí chất lượng cao, cập nhật liên tục 24/7. Trải nghiệm điện ảnh đỉnh cao ngay tại nhà.</p>
        </div>
    </section>

    <main id="main-content"></main>

    <div id="modalPopup" class="modal">
        <div style="max-width: 1200px; margin: 0 auto;">
            <div style="display:flex; justify-content:space-between; margin-bottom:20px; color:#fff;">
                <h2 id="modalTitle" class="text-gradient" style="font-size: 2rem; font-weight:800">Danh sách</h2>
                <span onclick="closeModal()" style="font-size:2rem; cursor:pointer;">&times;</span>
            </div>
            <div id="modalContent" class="modal-grid"></div>
        </div>
    </div>

    <footer>
        <div class="footer-grid">
            <div class="footer-col">
                <div class="footer-brand">
                    <img src="logo.webp" alt="HopPhim">
                    <span class="logo-text">HOPPHIM</span>
                </div>
                
                <p style="color: #a0a0a0; line-height: 1.6; margin-top: 15px;">
                    Trang xem phim trực tuyến miễn phí chất lượng cao với giao diện hiện đại, tốc độ tải phim nhanh và kho phim khổng lồ.
                </p>
            </div>
            <div class="footer-col">
                <h3>Danh mục</h3>
                <ul>
                    <li><a href="#">Phim Mới Cập Nhật</a></li>
                    <li><a href="#">Phim Chiếu Rạp</a></li>
                    <li><a href="#">Phim Bộ Độc Quyền</a></li>
                    <li><a href="#">TV Shows</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h3>Quốc gia</h3>
                <ul>
                    <li><a href="#">Hàn Quốc</a></li>
                    <li><a href="#">Trung Quốc</a></li>
                    <li><a href="#">Âu Mỹ</a></li>
                    <li><a href="#">Thái Lan</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h3>Hỗ trợ</h3>
                <ul>
                    <li><a href="#">Hỏi đáp (FAQ)</a></li>
                    <li><a href="#">Liên hệ quảng cáo</a></li>
                    <li><a href="#">Chính sách riêng tư</a></li>
                    <li><a href="#">Khiếu nại bản quyền</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 HopPhim. Design by HopTeam.</p>
        </div>
    </footer>

    <script>
        const API_BASE = 'https://ophim1.com/v1/api';
        const IMG_BASE = 'https://img.ophim1.com/uploads/movies/';

        const heroSection = document.getElementById('hero');
        const mainContent = document.getElementById('main-content');
        const header = document.getElementById('header');
        const modalPopup = document.getElementById('modalPopup');

        window.addEventListener('scroll', () => header.classList.toggle('scrolled', window.scrollY > 20));

        async function fetchAPI(endpoint) {
            try { return await (await fetch(API_BASE + endpoint)).json(); } catch { return null; }
        }

        // --- TẠO CARD VỚI HIỆU ỨNG TRỒI LÊN (SLIDE UP) ---
        function createCardHTML(movie) {
            const imgUrl = movie.thumb_url.startsWith('http') ? movie.thumb_url : `${IMG_BASE}${movie.thumb_url}`;
            const playLink = `xemphim.html?slug=${movie.slug}`;

            return `
                <div class="movie-card" onclick="window.location.href='${playLink}'">
                    <img src="${imgUrl}" alt="${movie.name}" class="movie-poster" loading="lazy" onerror="this.src='https://via.placeholder.com/200x300?text=No+Img'">
                    
                    <div class="card-overlay-gradient"></div>

                    <div class="movie-info-slideup">
                        <div class="movie-name">${movie.name}</div>
                        
                        <div class="movie-meta">
                            <span class="quality-badge">${movie.quality || 'HD'}</span>
                            <span>${movie.year}</span>
                            <span style="color: #FF5E62; font-size: 0.7rem;">●</span>
                            <span>${movie.lang || 'Vietsub'}</span>
                        </div>

                        <div class="card-actions">
                            <button class="btn-action btn-play"><i class="fas fa-play"></i> Xem ngay</button>
                            <button class="btn-action btn-list"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                </div>
            `;
        }

        async function loadHeroBg() {
            const data = await fetchAPI('/home');
            if (data?.data?.items?.[0]) {
                const bg = data.data.items[0].poster_url;
                heroSection.style.setProperty('--hero-bg', `url('${bg.startsWith('http') ? bg : IMG_BASE + bg}')`);
            }
        }

        function createMovieRow(title, movies, slugForSeeAll) {
            const section = document.createElement('section');
            section.className = 'category-section';
            const rowId = 'row-' + Math.random().toString(36).substr(2, 9);
            section.innerHTML = `
                <div class="category-header">
                    <h2 class="category-title text-gradient">${title}</h2>
                    ${slugForSeeAll ? `<a class="see-all-link" onclick="openModal('${slugForSeeAll}', '${title}')">Xem tất cả <i class="fas fa-chevron-right"></i></a>` : ''}
                </div>
                <div class="slider-container">
                    <button class="slider-arrow arrow-left" onclick="slide('${rowId}', -1)"><i class="fas fa-chevron-left"></i></button>
                    <div class="movie-row" id="${rowId}">${movies.map(createCardHTML).join('')}</div>
                    <button class="slider-arrow arrow-right" onclick="slide('${rowId}', 1)"><i class="fas fa-chevron-right"></i></button>
                </div>`;
            return section;
        }

        function slide(id, dir) {
            const row = document.getElementById(id);
            row.scrollBy({ left: dir * row.clientWidth * 0.8, behavior: 'smooth' });
        }

        async function loadHome() {
            mainContent.innerHTML = `
                <div class="loading-container">
                    <div class="loader-spinner"></div>
                    <div class="loading-text-pro">Đang tải kho phim...</div>
                </div>
            `;
            const [home, le, bo, han, hoat] = await Promise.all([
                fetchAPI('/home'), fetchAPI('/danh-sach/phim-le'), fetchAPI('/danh-sach/phim-bo'),
                fetchAPI('/quoc-gia/han-quoc'), fetchAPI('/danh-sach/hoat-hinh')
            ]);
            mainContent.innerHTML = '';
            if(home?.data?.items) mainContent.appendChild(createMovieRow('Phim Mới Cập Nhật', home.data.items));
            if(le?.data?.items) mainContent.appendChild(createMovieRow('Phim Lẻ Hot', le.data.items, '/danh-sach/phim-le'));
            if(bo?.data?.items) mainContent.appendChild(createMovieRow('Phim Bộ Tuyển Chọn', bo.data.items, '/danh-sach/phim-bo'));
            if(han?.data?.items) mainContent.appendChild(createMovieRow('K-Drama', han.data.items, '/quoc-gia/han-quoc'));
            if(hoat?.data?.items) mainContent.appendChild(createMovieRow('Anime', hoat.data.items, '/danh-sach/hoat-hinh'));
        }

        async function loadCategory(slug, title) {
            const isCountry = ['han-quoc', 'trung-quoc'].includes(slug);
            const data = await fetchAPI(`/${isCountry ? 'quoc-gia' : 'danh-sach'}/${slug}`);
            mainContent.innerHTML = '';
            if(data?.data?.items) mainContent.appendChild(createMovieRow(title, data.data.items));
        }
        async function loadCountry(slug, title) { loadCategory(slug, title); }

        async function openModal(slug, title) {
            document.getElementById('modalTitle').innerText = title;
            modalPopup.classList.add('active');
            const data = await fetchAPI(slug + '?page=1');
            const container = document.getElementById('modalContent');
            container.innerHTML = data?.data?.items ? data.data.items.map(m => `
                <div class="movie-card" onclick="window.location.href='xemphim.html?slug=${m.slug}'">
                    <img src="${m.thumb_url.startsWith('http') ? m.thumb_url : IMG_BASE + m.thumb_url}" class="movie-poster">
                    <div class="movie-info-slideup" style="transform: translateY(0); padding: 10px;">
                        <div class="movie-name" style="font-size:0.9rem">${m.name}</div>
                    </div>
                </div>
            `).join('') : 'Trống';
        }
        function closeModal() { modalPopup.classList.remove('active'); }

        const searchInput = document.getElementById('searchInput');
        let timeout = null;
        searchInput.addEventListener('keyup', (e) => {
            clearTimeout(timeout);
            timeout = setTimeout(() => {
                if(e.target.value.length > 2) {
                    fetchAPI(`/tim-kiem?keyword=${e.target.value}`).then(data => {
                        mainContent.innerHTML = '';
                        if(data?.data?.items) mainContent.appendChild(createMovieRow(`Kết quả: ${e.target.value}`, data.data.items));
                    });
                } else if(e.target.value.length === 0) loadHome();
            }, 500);
        });

        loadHeroBg(); loadHome();
    </script>
</body>
</html>